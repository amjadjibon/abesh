version: "1"

capabilities:
  - name: "golang_net_http_server"
    version: "0.0.1"
    contract_id: "abesh:httpserver"
    source: "github.com/mkawserm/abesh/capability/httpserver"
    runtime: "native"
    category: "trigger"
    values:
      host: "0.0.0.0"
      port: "9090"

services:
  - name: "ex_echo"
    version: "0.0.1"
    contract_id: "abesh:ex_echo"
    source: "github.com/mkawserm/abesh/example/echo"
    runtime: "native"
    authorization:
      immutable: false
      operator: "AND"
      expression_list:
        - "TODO"
    values:
      key1: "test1"
      key2: "test2"

    triggers:
      - name: "golang_net_http_server"
        version: "0.0.1"
        contract_id: "abesh:httpserver"
        trigger_values:
          method: "GET"
          path: "/default"

      - name: "golang_net_http_server"
        version: "0.0.1"
        contract_id: "abesh:httpserver"
        trigger_values:
          method: "GET"
          path: "/echo"
